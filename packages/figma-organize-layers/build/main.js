var Me=Object.create;var g=Object.defineProperty,Be=Object.defineProperties,Le=Object.getOwnPropertyDescriptor,Oe=Object.getOwnPropertyDescriptors,Re=Object.getOwnPropertyNames,V=Object.getOwnPropertySymbols,Te=Object.getPrototypeOf,J=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable;var q=(e,o,t)=>o in e?g(e,o,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[o]=t,l=(e,o)=>{for(var t in o||(o={}))J.call(o,t)&&q(e,t,o[t]);if(V)for(var t of V(o))ze.call(o,t)&&q(e,t,o[t]);return e},d=(e,o)=>Be(e,Oe(o));var s=(e,o)=>()=>(e&&(o=e(e=0)),o);var $e=(e,o)=>()=>(o||e((o={exports:{}}).exports,o),o.exports),X=(e,o)=>{for(var t in o)g(e,t,{get:o[t],enumerable:!0})},Y=(e,o,t,r)=>{if(o&&typeof o=="object"||typeof o=="function")for(let n of Re(o))!J.call(e,n)&&n!==t&&g(e,n,{get:()=>o[n],enumerable:!(r=Le(o,n))||r.enumerable});return e};var He=(e,o,t)=>(t=e!=null?Me(Te(e)):{},Y(o||!e||!e.__esModule?g(t,"default",{value:e,enumerable:!0}):t,e)),C=e=>Y(g({},"__esModule",{value:!0}),e);function A(e,o){let t=`${Z}`;return Z+=1,x[t]={handler:o,name:e},function(){delete x[t]}}function G(e,o){let t=!1;return A(e,function(...r){t!==!0&&(t=!0,o(...r))})}function Q(e,o){for(let t in x)x[t].name===e&&x[t].handler.apply(null,o)}var x,Z,I,ee=s(()=>{x={},Z=0;I=typeof window=="undefined"?function(e,...o){figma.ui.postMessage([e,...o])}:function(e,...o){window.parent.postMessage({pluginMessage:[e,...o]},"*")};typeof window=="undefined"?figma.ui.onmessage=function([e,...o]){Q(e,o)}:window.onmessage=function(e){if(typeof e.data.pluginMessage=="undefined")return;let[o,...t]=e.data.pluginMessage;Q(o,t)}});function P(e,o,t){if(e.removed!==!0){if("children"in e&&(typeof t!="function"||t(e)===!1))for(let r of e.children)P(r,o,t);o(e)}}var oe=s(()=>{});function U(e){let o=!1;return P(e,function(t){"expanded"in t&&t.expanded===!0&&(t.expanded=!1,o=!0)}),o}var te=s(()=>{oe()});function D(e){let o=e.parent;if(o===null)throw new Error("`node.parent` is `null`");return o}var _=s(()=>{});function re(e){let o=e.getPluginData(w);return o===""?{}:JSON.parse(o)}function ne(e,o){if(Object.keys(o).length===0){e.setPluginData(w,"");return}e.setPluginData(w,JSON.stringify(o))}var w,ie=s(()=>{w="relaunchButtons"});function E(e,o,t={description:""}){let r=d(l({},re(e)),{[o]:t.description});ne(e,r),e.setRelaunchData(r)}var se=s(()=>{ie()});function ae(e){if(e.length<2)return!0;let[o,...t]=e,r=D(o);for(let n of t)if(n.parent===null||n.parent.id!==r.id)return!1;return!0}var ue=s(()=>{_()});var pe=$e((go,fe)=>{var ce=function(e,o){var t,r,n=1,f=0,a=0,u=String.alphabet;function c(p,m,i){if(i){for(t=m;i=c(p,t),i<76&&i>65;)++t;return+p.slice(m-1,t)}return i=u&&u.indexOf(p.charAt(m)),i>-1?i+76:(i=p.charCodeAt(m)||0,i<45||i>127?i:i<46?65:i<48?i-1:i<58?i+18:i<65?i-11:i<91?i+11:i<97?i-37:i<123?i+5:i-63)}if((e+="")!=(o+="")){for(;n;)if(r=c(e,f++),n=c(o,a++),r<76&&n<76&&r>66&&n>66&&(r=c(e,f,f),n=c(o,a,f=t),a=t),r!=n)return r<n?-1:1}return 0};try{fe.exports=ce}catch(e){String.naturalCompare=ce}});function B(e){return e.length<2?e.slice():e.slice().sort(function(o,t){let r=o.name.toLowerCase(),n=t.name.toLowerCase();if(r!==n)return(0,M.default)(n,r);let f=t.y-o.y;if(f!==0)return f;let a=t.x-o.x;return a!==0?a:(0,M.default)(t.id,o.id)})}var M,me=s(()=>{M=He(pe(),1)});function le(e,o){if(e.length!==o.length)return!1;for(let t in e)if(e[t]!==o[t])return!1;return!0}var de=s(()=>{});function L(e){let o=D(e[0]);if(ae(e)===!1)throw new Error("Nodes in `siblingNodes` do not have the same parent");let t=e.slice(),r=o.children.map(function({id:a}){return a}),n=je(t,r);for(let a of t)o.insertChild(n,a);let f=o.children.map(function({id:a}){return a});return le(r,f)===!1}function je(e,o){let t=-1;for(let r of e){let n=o.indexOf(r.id);n>t&&(t=n)}return t+1}var ge=s(()=>{de();_();ue()});function O(e,o){let t=[];for(let r of e)t.push(Fe(r,o));return t}function Fe(e,o){let t={};for(let r of o){let n=e[r];if(typeof n=="undefined")throw new Error(`Key \`${String(r)}\` does not exist on \`object\``);t[r]=n}return t}var xe=s(()=>{});async function R(e,o=ye){let t=await figma.clientStorage.getAsync(o);return typeof t=="undefined"?e:Object.assign({},e,t)}async function y(e,o=ye){await figma.clientStorage.setAsync(o,e)}var ye,Se=s(()=>{ye="settings"});function T(e){return`${Ke} ${he} ${e}`}function z(e){return`${We} ${he} ${e}`}var Ke,We,he,Ne=s(()=>{Ke="\u2714",We="\u2718",he="\xA0"});function $(e,o,t){return e===1?o:typeof t=="undefined"?`${o}s`:t}var Ae=s(()=>{});function H(e,o){if(typeof __html__=="undefined")throw new Error("No UI defined");let t=`<div id="create-figma-plugin"></div><script>document.body.classList.add('theme-${figma.editorType}');const __FIGMA_COMMAND__='${typeof figma.command=="undefined"?"":figma.command}';const __SHOW_UI_DATA__=${JSON.stringify(typeof o=="undefined"?{}:o)};${__html__}</script>`;figma.showUI(t,d(l({},e),{themeColors:typeof e.themeColors=="undefined"?!0:e.themeColors}))}var Ge=s(()=>{});var S=s(()=>{ee();te();se();me();ge();xe();Se();Ne();Ae();Ge()});var h,b,j=s(()=>{"use strict";h="2021-05-01",b={combineSingleLayerGroups:!0,groupDefinition:1,horizontalSpace:100,verticalSpace:50}});function De(e,o){if(e==="/")return"/";let t=Ve(e);return t.length===1?e:t.length<=o?t.slice(0,t.length-1).join("/"):t.slice(0,o).join("/")}function Ve(e){return(e[e.length-1]==="/"?e.substring(0,e.length-1):e).split(ke)}var ke,be=s(()=>{"use strict";ke=/\//});function v(e,o){let{combineSingleLayerGroups:t,groupDefinition:r}=o,n={};for(let u of B(e).reverse()){let c=De(u.name,r);if(typeof n[c]=="undefined"){let p={name:c,nodes:[]};n[c]=p}n[c].nodes.push(u)}if(t===!1||qe(n)<2)return Object.values(n);let f=[],a={name:null,nodes:[]};for(let u in n){let c=n[u];if(c.nodes.length===1){a.nodes.push(c.nodes[0]);continue}f.push(c)}return[a,...f]}function qe(e){let o=0;for(let t in e)e[t].nodes.length===1&&o++;return o}var F=s(()=>{"use strict";S();be()});function K(e){let o=e.map(function({name:t}){let r=t.match(Je);return r===null?1:r.length});return Math.min(5,Math.max(...o))}var Je,ve=s(()=>{"use strict";Je=/\//g});function Ce(e,o){let{horizontalSpace:t,verticalSpace:r}=o,n=0;for(let f of e){let a=0,u=0;for(let{id:c}of f.nodes){let p=figma.getNodeById(c);p.x=n,p.y=a,a=p.y+p.height+r,u=Math.max(u,p.width)}n+=u+t}}var Ie=s(()=>{"use strict"});function Pe(e,o){let{combineSingleLayerGroups:t,groupDefinition:r,horizontalSpace:n,verticalSpace:f}=o,a=v(e,{combineSingleLayerGroups:t,groupDefinition:r});Ce(a,{horizontalSpace:n,verticalSpace:f}),Xe(a),Ye(e)}function Xe(e){let o=[];for(let t of e.slice().reverse())for(let r of t.nodes.slice().reverse())o.push(r);L(o)}function Ye(e){for(let o of e)U(o)}var Ue=s(()=>{"use strict";S();Ie();F()});var W={};X(W,{default:()=>Ze});async function Ze(){let e=figma.currentPage.children.slice();if(e.length===0){figma.closePlugin(z("No layers on page"));return}let o=await R(b,h);function t(){let u=figma.currentPage.children.slice(),{combineSingleLayerGroups:c,groupDefinition:p}=o,m=_e(u,{combineSingleLayerGroups:c,groupDefinition:p}),i=K(u);I("UPDATE_UI_STATE",m,i)}figma.on("selectionchange",t),G("CLOSE_UI",function(){figma.closePlugin()}),G("SUBMIT",async function(u){await y(u,h);let{combineSingleLayerGroups:c,groupDefinition:p,horizontalSpace:m,verticalSpace:i}=u;if(m===null||i===null){figma.closePlugin();return}let N=figma.currentPage.children.slice();Pe(N,{combineSingleLayerGroups:c,groupDefinition:p,horizontalSpace:m,verticalSpace:i}),figma.viewport.scrollAndZoomIntoView(N),E(figma.currentPage,"organizeLayers"),figma.closePlugin(T(`Organized ${N.length} ${$(N.length,"layer")}`))}),A("UPDATE_MAIN_STATE",function(u){o.groupDefinition=u.groupDefinition,o.combineSingleLayerGroups=u.combineSingleLayerGroups,t()});let{combineSingleLayerGroups:r,groupDefinition:n}=o,f=_e(e,{combineSingleLayerGroups:r,groupDefinition:n}),a=K(e);H({height:350,width:240},d(l({},o),{groups:f,maximumGroupDefinition:a}))}function _e(e,o){return v(e,o).map(function(t){return d(l({},t),{nodes:O(t.nodes,["id","name"])})})}var k=s(()=>{"use strict";S();j();F();ve();Ue()});var we={};X(we,{default:()=>Qe});async function Qe(){await y(b,h),figma.closePlugin("Reset plugin")}var Ee=s(()=>{"use strict";S();j()});var eo={"src/organize-nodes/main.ts--default":(k(),C(W)).default,"src/reset-plugin/main.ts--default":(Ee(),C(we)).default,organizeLayers:(k(),C(W)).default},oo=typeof figma.command=="undefined"||figma.command===""?"src/organize-nodes/main.ts--default":figma.command;eo[oo]();
/*! Bundled license information:

natural-compare-lite/index.js:
  (*
   * @version    1.4.0
   * @date       2015-10-26
   * @stability  3 - Stable
   * @author     Lauri Rooden (https://github.com/litejs/natural-compare-lite)
   * @license    MIT License
   *)
*/
