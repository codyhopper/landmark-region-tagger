var E=Object.defineProperty,Qe=Object.defineProperties,Je=Object.getOwnPropertyDescriptor,Ze=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertyNames,z=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,tt=Object.prototype.propertyIsEnumerable;var k=(t,e,n)=>e in t?E(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w=(t,e)=>{for(var n in e||(e={}))q.call(e,n)&&k(t,n,e[n]);if(z)for(var n of z(e))tt.call(e,n)&&k(t,n,e[n]);return t},b=(t,e)=>Qe(t,Ze(e));var a=(t,e)=>()=>(t&&(e=t(t=0)),e);var T=(t,e)=>{for(var n in e)E(t,n,{get:e[n],enumerable:!0})},nt=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of et(e))!q.call(t,r)&&r!==n&&E(t,r,{get:()=>e[r],enumerable:!(o=Je(e,r))||o.enumerable});return t};var A=t=>nt(E({},"__esModule",{value:!0}),t);function j(t,e){let n=`${G}`;return G+=1,P[n]={handler:e,name:t},function(){delete P[n]}}function u(t,e){let n=!1;return j(t,function(...o){n!==!0&&(n=!0,e(...o))})}function X(t,e){for(let n in P)P[n].name===t&&P[n].handler.apply(null,e)}var P,G,y,K=a(()=>{P={},G=0;y=typeof window=="undefined"?function(t,...e){figma.ui.postMessage([t,...e])}:function(t,...e){window.parent.postMessage({pluginMessage:[t,...e]},"*")};typeof window=="undefined"?figma.ui.onmessage=function([t,...e]){X(t,e)}:window.onmessage=function(t){if(typeof t.data.pluginMessage=="undefined")return;let[e,...n]=t.data.pluginMessage;X(e,n)}});function C(t){return{x:t.absoluteTransform[0][2],y:t.absoluteTransform[1][2]}}var W=a(()=>{});function R(t,e,n){if(t.removed!==!0){if("children"in t&&(typeof n!="function"||n(t)===!1))for(let o of t.children)R(o,e,n);e(t)}}var V=a(()=>{});function Y(t){let e=t.parent;if(e===null)throw new Error("`node.parent` is `null`");return e}var Q=a(()=>{});function v(){let t=figma.currentPage.selection;return t.length>0?t.slice():figma.currentPage.children.slice()}var J=a(()=>{});function M(t,e){let n=Y(e),o=n.children.indexOf(e);n.insertChild(o+1,t)}var Z=a(()=>{Q()});async function h(t){let e={};for(let n of t)switch(n.type){case"CONNECTOR":case"SHAPE_WITH_TEXT":case"STICKY":{ee(n.text,e);break}case"TEXT":{ee(n,e);break}}await Promise.all(Object.values(e).map(function(n){return figma.loadFontAsync(n)}))}function ee(t,e){let n=t.characters.length;if(n===0){let r=t.fontName,i=te(r);if(i in e)return;e[i]=r;return}let o=-1;for(;++o<n;){let r=t.getRangeFontName(o,o+1),i=te(r);i in e||(e[i]=r)}}function te(t){return`${t.family}-${t.style}`}var ne=a(()=>{});async function $(t,e=oe){let n=await figma.clientStorage.getAsync(e);return typeof n=="undefined"?t:Object.assign({},t,n)}async function F(t,e=oe){await figma.clientStorage.setAsync(e,t)}var oe,re=a(()=>{oe="settings"});function p(t){return`${ot} ${ie} ${t}`}function l(t){return`${rt} ${ie} ${t}`}var ot,rt,ie,se=a(()=>{ot="\u2714",rt="\u2718",ie="\xA0"});function x(t,e,n){return t===1?e:typeof n=="undefined"?`${e}s`:n}var ae=a(()=>{});function S(t,e){if(typeof __html__=="undefined")throw new Error("No UI defined");let n=`<div id="create-figma-plugin"></div><script>document.body.classList.add('theme-${figma.editorType}');const __FIGMA_COMMAND__='${typeof figma.command=="undefined"?"":figma.command}';const __SHOW_UI_DATA__=${JSON.stringify(typeof e=="undefined"?{}:e)};${__html__}</script>`;figma.showUI(n,b(w({},t),{themeColors:typeof t.themeColors=="undefined"?!0:t.themeColors}))}var ce=a(()=>{});var g=a(()=>{K();W();J();Z();ne();V();re();se();ae();ce()});function H(t){let e=[];for(let n of t)R(n,function(o){o.type==="TEXT"&&e.push(o)});return e}var L=a(()=>{"use strict";g()});function _(t,e){if(t[0].parent===null)throw new Error("Node has no parent");let o=e==="x"?"y":"x";return t.slice().sort(function(i,c){let s=C(i),f=C(c);return s[e]!==f[e]?s[e]-f[e]:s[o]!==f[o]?s[o]-f[o]:0})}var O=a(()=>{"use strict";g()});function m(){let t=[],e=figma.currentPage.selection.slice();for(let n of e)R(n,function(o){o.type==="TEXT"&&o.characters.trim().length>0&&t.push(o)});return t.length===0?[]:_(t,"y")}var N=a(()=>{"use strict";g();O()});async function le(t,e){let n=t.getStyledTextSegments(["fills","fillStyleId","fontName","fontSize","hyperlink","indentation","letterSpacing","lineHeight","listOptions","textCase","textDecoration","textStyleId"]);await h([t,e]),e.characters=t.characters;for(let o of n){let{start:r,end:i}=o;e.setRangeFills(r,i,o.fills),e.setRangeFillStyleId(r,i,o.fillStyleId),e.setRangeFontName(r,i,o.fontName),e.setRangeFontSize(r,i,o.fontSize),e.setRangeHyperlink(r,i,o.hyperlink),e.setRangeIndentation(r,i,o.indentation),e.setRangeLetterSpacing(r,i,o.letterSpacing),e.setRangeLetterSpacing(r,i,o.letterSpacing),e.setRangeLineHeight(r,i,o.lineHeight),e.setRangeListOptions(r,i,o.listOptions),e.setRangeTextCase(r,i,o.textCase),e.setRangeTextDecoration(r,i,o.textDecoration),e.setRangeTextStyleId(r,i,o.textStyleId)}}var fe=a(()=>{"use strict";g()});var ge={};T(ge,{default:()=>it});async function it(){let t=st(),e=m();u("CLOSE_UI",function(){figma.closePlugin()}),figma.on("selectionchange",async function(){let o=m(),r=ct(e,o);r.length>0&&await at(r,t),e=o;let i=e.length===1?t[e[0].id].length+1:0;y("SELECTION_CHANGED",i)});let n=e.length===1?t[e[0].id].length+1:0;S({height:120,title:"Bulk Edit Text",width:320},{identicalTextNodeCount:n})}function st(){let t=H(figma.currentPage.children.slice()),e={};for(let o of t){let r=o.characters;typeof e[r]=="undefined"&&(e[r]=[]),e[r].push(o.id)}let n={};for(let o of t)n[o.id]=e[o.characters].filter(function(r){return r!==o.id});return n}async function at(t,e){for(let n of t){let o=e[n.id].map(function(r){return figma.getNodeById(r)});for(let r of o)await le(n,r)}}function ct(t,e){let n={};for(let r of e)n[r.id]=!0;let o=[];for(let r of t)typeof n[r.id]=="undefined"&&o.push(r);return o}var me=a(()=>{"use strict";g();L();N();fe()});var ue={};T(ue,{default:()=>lt});async function lt(){if(figma.currentPage.selection.length===0){figma.closePlugin(l("Select at least 1 text layer"));return}let t=m();if(t.length===0){figma.closePlugin(l("No text layers in selection"));return}u("CLOSE_UI",function(){figma.closePlugin()}),u("SUBMIT",function(){let e=m(),n=ft(e);if(n.length===0||n===`
`){figma.closePlugin(l("Nothing to copy"));return}y("COPY_TEXT_TO_CLIPBOARD_REQUEST",{count:e.length,text:n})}),u("COPY_TEXT_TO_CLIPBOARD_SUCCESS",function(e){figma.closePlugin(p(`Copied ${e} ${x(e,"text layer")}`))}),figma.on("selectionchange",function(){y("SELECTION_CHANGED",m().length)}),S({height:100,width:240},{count:t.length})}function ft(t){return t.map(function(e){return e.characters}).join(`
`)}var de=a(()=>{"use strict";g();N()});async function pe(){return new Promise(function(t){u("READ_CLIPBOARD_STRING_RESULT",function(e){figma.ui.close(),t(e)}),S({height:0,width:0}),y("READ_CLIPBOARD_STRING_REQUEST")})}var xe=a(()=>{"use strict";g()});async function ye(t,e){await h(t);for(let n of t)n.characters=e}var he=a(()=>{"use strict";g()});var Se={};T(Se,{default:()=>gt});async function gt(){if(figma.currentPage.selection.length===0){figma.closePlugin(l("Select one or more text layers"));return}let t=m();if(t.length===0){figma.closePlugin(l("No text layers in selection"));return}let e=await pe();if(e===`
`){figma.closePlugin(l("Nothing to paste"));return}await ye(t,e),figma.closePlugin(p(`Pasted text in ${t.length} ${x(t.length,"text layer")}`))}var Te=a(()=>{"use strict";g();N();xe();he()});function Ie(t){let e=Ne(Ae(t,"y")),n=Ne(Ae(t,"x")),o=[];for(let r of t){let i=e[r.id],c=n[r.id];typeof o[i]=="undefined"&&Re(o,i,ut),typeof o[i][c]=="undefined"&&Re(o[i],c,mt),o[i][c]===""?o[i][c]=r.characters:o[i][c]=`${o[i][c]}
${r.characters}`}return o}function Ae(t,e){let[n,...o]=_(t,e),r=[],i=[n],c=C(n)[e]+Ce(n);for(let s of o){let f=C(s)[e],d=Ce(s);if(f>c){c=f+d,r.push(i),i=[s];continue}c=Math.max(c,f+d),i.push(s)}return r.push(i),r}function Ce(t){let e=t.getRangeLineHeight(0,1);if(e.unit==="PIXELS")return e.value;let n=t.getRangeFontSize(0,1);return e.unit==="PERCENT"?n*e.value/100:Math.round(n*1.2)}function Ne(t){let e={},n=0;for(let o of t){for(let r of o)e[r.id]=n;n+=1}return e}function Re(t,e,n){let o=0;for(;o<=e;)typeof t[o]=="undefined"&&(t[o]=n()),o+=1}function mt(){return""}function ut(){return[]}var Pe=a(()=>{"use strict";g();O()});function Ee(t){let e=[];for(let n of t){let o=n.map(function(r){return pt(r)}).join(",");e.push(o)}return e.join(`
`)}function pt(t){return`"${t.replace(dt,'""')}"`}var dt,we=a(()=>{"use strict";dt=/"/g});function be(t){let e=[];for(let n of t){let o=n.map(function(r){return`<td>${St(r)}</td>`}).join("");e.push(`<tr>${o}</tr>`)}return`<table>${e.join("")}</table>`}function St(t){return t.replace(yt,function(e){return xt[e]}).replace(ht,"<br />")}var xt,yt,ht,He=a(()=>{"use strict";xt={'"':"&quot","&":"&amp","'":"&#39","<":"&lt",">":"&gt"},yt=/[&<"']/g,ht=/\n/g});var _e={};T(_e,{default:()=>Tt});function Tt(){if(figma.currentPage.selection.length===0){figma.closePlugin(l("Select at least 1 text layer"));return}let t=m();if(t.length===0){figma.closePlugin(l("No text layers in selection"));return}u("CLOSE_UI",function(){figma.closePlugin()}),u("SUBMIT",function(){let e=m(),n=Ie(e);y("COPY_TEXT_TO_CLIPBOARD_REQUEST",{count:e.length,html:be(n),text:Ee(n)})}),u("COPY_TEXT_TO_CLIPBOARD_SUCCESS",function(e){figma.closePlugin(p(`Copied ${e} ${x(e,"text layer")}`))}),figma.on("selectionchange",function(){y("SELECTION_CHANGED",m().length)}),S({height:100,width:240},{count:t.length})}var ve=a(()=>{"use strict";g();N();Pe();we();He()});async function Me(t,e){let{caseSensitive:n,findString:o,useRegularExpression:r,replaceString:i}=e;await h(t);let c=0;if(r===!1){for(let f of t){let d=f.characters.split(o);d.length>1&&(c+=d.length-1,f.characters=d.join(i))}return c}let s=new RegExp(o,n===!0?"g":"ig");for(let f of t){let d=f.characters;s.test(d)!==!1&&(f.characters=d.replace(s,function(){return c+=1,i}))}return c}var $e=a(()=>{"use strict";g()});var U,Fe,Le=a(()=>{"use strict";U="2021-05-01",Fe={caseSensitive:!1,findString:"",replaceString:"",useRegularExpression:!1}});var Oe={};T(Oe,{default:()=>At});async function At(){let t=await $(Fe,U);u("CLOSE_UI",function(){figma.closePlugin()}),u("SUBMIT",async function(e){await F(e,U);let{caseSensitive:n,findString:o,useRegularExpression:r}=e,i=r===!0?`/${o}/g${n===!0?"":"i"}`:`\u201C${o}\u201D`,c=figma.currentPage.selection.length===0?"on page":"in selection",s=await Me(H(v()),e);if(s===0){figma.closePlugin(l(`No matches for ${i} ${c}`));return}figma.closePlugin(p(`Replaced ${s} ${x(s,"match","matches")} for ${i} ${c}`))}),figma.on("selectionchange",function(){y("SELECTION_CHANGED",figma.currentPage.selection.length>0)}),S({height:288,title:"Find and Replace",width:240},b(w({},t),{hasSelection:figma.currentPage.selection.length>0}))}var Ue=a(()=>{"use strict";g();L();$e();Le()});function Be(t,e,n){let o=0,r=t.characters.length;for(;o<r;){let i=e.getRangeFillStyleId(n+o,n+o+1);if(i!==""){if(i===figma.mixed)throw new Error("Invariant violation");t.setRangeFillStyleId(o,o+1,i)}else{let s=e.getRangeFills(n+o,n+o+1);if(s===figma.mixed)throw new Error("Invariant violation");t.setRangeFills(o,o+1,s)}let c=e.getRangeTextStyleId(n+o,n+o+1);if(c!==""){if(c===figma.mixed)throw new Error("Invariant violation");t.setRangeTextStyleId(o,o+1,c)}else{let s=e.getRangeFontSize(n+o,n+o+1),f=e.getRangeFontName(n+o,n+o+1),d=e.getRangeLetterSpacing(n+o,n+o+1),I=e.getRangeLineHeight(n+o,n+o+1),B=e.getRangeTextCase(n+o,n+o+1),D=e.getRangeTextDecoration(n+o,n+o+1);if(s===figma.mixed||f===figma.mixed||d===figma.mixed||I===figma.mixed||B===figma.mixed||D===figma.mixed)throw new Error("Invariant violation");t.setRangeFontSize(o,o+1,s),t.setRangeFontName(o,o+1,f),t.setRangeLetterSpacing(o,o+1,d),t.setRangeLineHeight(o,o+1,I),t.setRangeTextCase(o,o+1,B),t.setRangeTextDecoration(o,o+1,D)}o+=1}e.textAutoResize==="WIDTH_AND_HEIGHT"?t.textAutoResize="WIDTH_AND_HEIGHT":(t.resize(e.width,t.height),t.textAutoResize="HEIGHT"),t.paragraphSpacing=e.paragraphSpacing,t.paragraphIndent=e.paragraphIndent}var De=a(()=>{"use strict"});async function ze(t){await h(t);let e=[];for(let n of t)e=e.concat(await Ct(n));return e}async function Ct(t){if(t.parent===null)throw new Error("Node has no parent");let n=t.characters.split(`
`);if(n.length===1)return[t];let o=t.y,r=0,i=[];for(let c of n){if(c===""){r+=1;continue}let s=figma.createText();await h([s]),M(s,t),s.x=t.x,s.y=o;let f=c===""?" ":c;s.characters=f,Be(s,t,r),o+=s.height+t.paragraphSpacing,r+=c.length+1,i.push(s)}return t.remove(),i}var ke=a(()=>{"use strict";g();De()});var qe={};T(qe,{default:()=>Nt});async function Nt(){if(figma.currentPage.selection.length===0){figma.closePlugin(l("Select one or more text layers"));return}let t=figma.currentPage.selection.filter(function(n){return n.type==="TEXT"});if(t.length===0){figma.closePlugin(l("No text layers in selection"));return}let e=await ze(t);figma.currentPage.selection=e,figma.closePlugin(p(`Split ${t.length} ${x(t.length,"text layer")}`))}var Ge=a(()=>{"use strict";g();ke()});async function Xe(t){await h(t);for(let e of t){let n=e.characters.length,o=e.getRangeFillStyleId(0,1);if(o!==""){if(o===figma.mixed)throw new Error("Invariant violation");e.setRangeFillStyleId(0,n,o)}else{let i=e.getRangeFills(0,1);if(i===figma.mixed)throw new Error("Invariant violation");e.setRangeFills(0,n,i)}let r=e.getRangeTextStyleId(0,1);if(r!==""){if(r===figma.mixed)throw new Error("Invariant violation");e.setRangeTextStyleId(0,n,r)}else{let i=e.getRangeFontSize(0,1),c=e.getRangeFontName(0,1),s=e.getRangeLetterSpacing(0,1),f=e.getRangeLineHeight(0,1),d=e.getRangeTextCase(0,1),I=e.getRangeTextDecoration(0,1);if(i===figma.mixed||c===figma.mixed||s===figma.mixed||f===figma.mixed||d===figma.mixed||I===figma.mixed)throw new Error("Invariant violation");e.setRangeFontSize(0,n,i),e.setRangeFontName(0,n,c),e.setRangeLetterSpacing(0,n,s),e.setRangeLineHeight(0,n,f),e.setRangeTextCase(0,n,d),e.setRangeTextDecoration(0,n,I)}}}var je=a(()=>{"use strict";g()});var Ke={};T(Ke,{default:()=>Rt});async function Rt(){if(figma.currentPage.selection.length===0){figma.closePlugin(l("Select one or more text layers"));return}let t=m();if(t.length===0){figma.closePlugin(l("No text layers in selection"));return}await Xe(t),figma.closePlugin(p(`Normalized text style of ${t.length} ${x(t.length,"layer")}`))}var We=a(()=>{"use strict";g();N();je()});var Ve={};T(Ve,{default:()=>It});async function It(){if(figma.currentPage.selection.length===0){figma.closePlugin(l("Select one or more text layers"));return}let t=m();if(t.length===0){figma.closePlugin(l("No text layers in selection"));return}for(let e of t)e.autoRename=!0;figma.closePlugin(p(`Reset ${t.length} text layer ${x(t.length,"name")}`))}var Ye=a(()=>{"use strict";g();N()});var Pt={"src/bulk-edit-text/main.ts--default":(me(),A(ge)).default,"src/bulk-copy-text/main.ts--default":(de(),A(ue)).default,"src/bulk-paste-text/main.ts--default":(Te(),A(Se)).default,"src/copy-for-spreadsheet/main.ts--default":(ve(),A(_e)).default,"src/find-and-replace/main.ts--default":(Ue(),A(Oe)).default,"src/split-text-nodes-by-line/main.ts--default":(Ge(),A(qe)).default,"src/normalize-text-style/main.ts--default":(We(),A(Ke)).default,"src/reset-text-layer-names/main.ts--default":(Ye(),A(Ve)).default},Et=typeof figma.command=="undefined"||figma.command===""?"src/bulk-edit-text/main.ts--default":figma.command;Pt[Et]();
