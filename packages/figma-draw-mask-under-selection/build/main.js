var f=Object.defineProperty,K=Object.defineProperties,q=Object.getOwnPropertyDescriptor,J=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertyNames,P=Object.getOwnPropertySymbols;var B=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var S=(o,e,t)=>e in o?f(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t,d=(o,e)=>{for(var t in e||(e={}))B.call(e,t)&&S(o,t,e[t]);if(P)for(var t of P(e))Y.call(e,t)&&S(o,t,e[t]);return o},x=(o,e)=>K(o,J(e));var s=(o,e)=>()=>(o&&(e=o(o=0)),e);var Z=(o,e)=>{for(var t in e)f(o,t,{get:e[t],enumerable:!0})},ee=(o,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of Q(e))!B.call(o,r)&&r!==t&&f(o,r,{get:()=>e[r],enumerable:!(n=q(e,r))||n.enumerable});return o};var oe=o=>ee(f({},"__esModule",{value:!0}),o);function g(o){return{x:o.absoluteTransform[0][2],y:o.absoluteTransform[1][2]}}var I=s(()=>{});function y(o,e){if(typeof e.x=="undefined"&&typeof e.y=="undefined")throw new Error("Need at least one of `x` or `y`");let t=typeof e.x=="undefined"?null:e.x,n=typeof e.y=="undefined"?null:e.y,r=o.parent;for(;r!==null&&r.type!=="PAGE";)(r.type==="FRAME"||r.type==="SECTION")&&(t!==null&&(t=t-r.x),n!==null&&(n=n-r.y)),r=r.parent;t!==null&&(o.x=t),n!==null&&(o.y=n)}var O=s(()=>{});function m(o){let e=o.parent;if(e===null)throw new Error("`node.parent` is `null`");return e}var u=s(()=>{});function w(o){if("rotation"in o&&o.rotation===0){let l=g(o),{width:z,height:j}=o;return x(d({},l),{height:j,width:z})}let e=m(o),t=e.children.indexOf(o),n=figma.group([o],e,t),r=g(n),{width:a,height:i}=n;return e.insertChild(t,o),x(d({},r),{height:i,width:a})}var U=s(()=>{I();u()});function N(o){let e=[{x:Number.MAX_VALUE,y:Number.MAX_VALUE},{x:-1*Number.MAX_VALUE,y:-1*Number.MAX_VALUE}];for(let t of o){let{x:n,y:r,width:a,height:i}=w(t);e=[{x:Math.min(e[0].x,n),y:Math.min(e[0].y,r)},{x:Math.max(e[1].x,n+a),y:Math.max(e[1].y,r+i)}]}return e}var T=s(()=>{U()});function h(o,e){let t=m(e),n=t.children.indexOf(e);t.insertChild(n,o)}var v=s(()=>{u()});function p(o){let e=o.parent;return e===null||e.type==="DOCUMENT"||e.type==="PAGE"?!1:e.type==="INSTANCE"?!0:p(e)}var R=s(()=>{});function $(o){if(o.length<2)return!0;let[e,...t]=o,n=m(e);for(let r of t)if(r.parent===null||r.parent.id!==n.id)return!1;return!0}var k=s(()=>{u()});function A(o){let e=te(o),t=[];for(let n of e){let r=m(n[0]),a=n.map(function(i){return{index:r.children.indexOf(i),node:i}}).sort(function(i,l){return i.index-l.index}).map(function({node:i}){return i});t.push(a)}return t}function te(o){let e={};for(let t of o){let r=m(t).id;r in e||(e[r]=[]),e[r].push(t)}return Object.values(e)}var G=s(()=>{u()});function M(o){if(o.length<2)return o.slice();let e=m(o[0]);if($(o)===!1)throw new Error("Nodes in `siblingNodes` do not have the same parent");return o.slice().map(function(t){return{index:e.children.indexOf(t),node:t}}).sort(function(t,n){return t.index-n.index}).map(function({node:t}){return t})}var D=s(()=>{u();k()});function b(o){return`${re} ${L} ${o}`}function c(o){return`${ne} ${L} ${o}`}var re,ne,L,F=s(()=>{re="\u2714",ne="\u2718",L="\xA0"});function C(o,e,t){return o===1?e:typeof t=="undefined"?`${e}s`:t}var V=s(()=>{});var E=s(()=>{O();T();v();R();G();D();F();V()});function W(o){let e=M(o),t=e[0],n=e[o.length-1],r=se(o,t),a=r.parent;if(a===null)throw new Error("Node has no parent");let i=figma.group([...o,r],a,a.children.indexOf(n));return i.name="Mask Group",r}function se(o,e){let t=figma.createRectangle();h(t,e),t.name="Mask";let n=N(o);y(t,{x:n[0].x,y:n[0].y});let r=n[1].x-n[0].x,a=n[1].y-n[0].y;return t.resize(r,a),t.isMask=!0,t.fills=[{color:{b:1,g:1,r:1},type:"SOLID"}],t}var X=s(()=>{"use strict";E()});var _={};Z(_,{default:()=>ie});async function ie(){if(figma.currentPage.selection.length===0){figma.closePlugin(c("Select one or more layers"));return}let o=A(figma.currentPage.selection.slice());if(o.length>1){figma.closePlugin(c("Select sibling layers at the same hierarchy"));return}let e=o[0];if(p(e[0])===!0){figma.closePlugin(c("Select layers outside instance layers"));return}let t=W(e);figma.currentPage.selection=[t],figma.closePlugin(b(`Drew mask under ${e.length} ${C(e.length,"selected layer")}`))}var H=s(()=>{"use strict";E();X()});var ae={"src/main.ts--default":(H(),oe(_)).default},me="src/main.ts--default";ae[me]();
