var b=Object.defineProperty,se=Object.defineProperties,ce=Object.getOwnPropertyDescriptor,ae=Object.getOwnPropertyDescriptors,ie=Object.getOwnPropertyNames,H=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,me=Object.prototype.propertyIsEnumerable;var B=(e,t,o)=>t in e?b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,a=(e,t)=>{for(var o in t||(t={}))$.call(t,o)&&B(e,o,t[o]);if(H)for(var o of H(t))me.call(t,o)&&B(e,o,t[o]);return e},i=(e,t)=>se(e,ae(t));var s=(e,t)=>()=>(e&&(t=e(e=0)),t);var M=(e,t)=>{for(var o in t)b(e,o,{get:t[o],enumerable:!0})},fe=(e,t,o,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of ie(t))!$.call(e,n)&&n!==o&&b(e,n,{get:()=>t[n],enumerable:!(r=ce(t,n))||r.enumerable});return e};var U=e=>fe(b({},"__esModule",{value:!0}),e);function D(e,t){let o=`${j}`;return j+=1,g[o]={handler:t,name:e},function(){delete g[o]}}function f(e,t){let o=!1;return D(e,function(...r){o!==!0&&(o=!0,t(...r))})}function L(e,t){for(let o in g)g[o].name===e&&g[o].handler.apply(null,t)}var g,j,y,R=s(()=>{g={},j=0;y=typeof window=="undefined"?function(e,...t){figma.ui.postMessage([e,...t])}:function(e,...t){window.parent.postMessage({pluginMessage:[e,...t]},"*")};typeof window=="undefined"?figma.ui.onmessage=function([e,...t]){L(e,t)}:window.onmessage=function(e){if(typeof e.data.pluginMessage=="undefined")return;let[t,...o]=e.data.pluginMessage;L(t,o)}});function T(e,t,o){if(e.removed!==!0){if("children"in e&&(typeof o!="function"||o(e)===!1))for(let r of e.children)T(r,t,o);t(e)}}var K=s(()=>{});function x(e){let t=figma.getNodeById(e);if(t===null)throw new Error(`No node found with \`id\`: ${e}`);if(t.type==="DOCUMENT"||t.type==="PAGE")throw new Error("`node` is not a `SceneNode`");return t}var G=s(()=>{});async function C(e){let t={};for(let o of e)switch(o.type){case"CONNECTOR":case"SHAPE_WITH_TEXT":case"STICKY":{k(o.text,t);break}case"TEXT":{k(o,t);break}}await Promise.all(Object.values(t).map(function(o){return figma.loadFontAsync(o)}))}function k(e,t){let o=e.characters.length;if(o===0){let n=e.fontName,c=W(n);if(c in t)return;t[c]=n;return}let r=-1;for(;++r<o;){let n=e.getRangeFontName(r,r+1),c=W(n);c in t||(t[c]=n)}}function W(e){return`${e.family}-${e.style}`}var X=s(()=>{});function d(e,t){let o=[];for(let r of e)o.push(de(r,t));return o}function de(e,t){let o={};for(let r of t){let n=e[r];if(typeof n=="undefined")throw new Error(`Key \`${String(r)}\` does not exist on \`object\``);o[r]=n}return o}var q=s(()=>{});async function N(e,t=V){let o=await figma.clientStorage.getAsync(t);return typeof o=="undefined"?e:Object.assign({},e,o)}async function u(e,t=V){await figma.clientStorage.setAsync(t,e)}var V,Y=s(()=>{V="settings"});function S(e){return`${ue} ${z} ${e}`}function h(e){return`${le} ${z} ${e}`}var ue,le,z,J=s(()=>{ue="\u2714",le="\u2718",z="\xA0"});function A(e,t){if(typeof __html__=="undefined")throw new Error("No UI defined");let o=`<div id="create-figma-plugin"></div><script>document.body.classList.add('theme-${figma.editorType}');const __FIGMA_COMMAND__='${typeof figma.command=="undefined"?"":figma.command}';const __SHOW_UI_DATA__=${JSON.stringify(typeof t=="undefined"?{}:t)};${__html__}</script>`;figma.showUI(o,i(a({},e),{themeColors:typeof e.themeColors=="undefined"?!0:e.themeColors}))}var Q=s(()=>{});var E=s(()=>{R();G();X();K();q();Y();J();Q()});function l(){let e=figma.currentPage.selection,t=[];for(let o of e)T(o,function(r){r.type==="TEXT"&&t.push(r)});return t}var O=s(()=>{"use strict";E()});var m,p,w=s(()=>{"use strict";m="2021-05-01",p={convertCurrency:{currencyCode:"USD",roundNumbers:!0},formatCurrency:{currencyFormat:"RETAIN"},localeCode:"en"}});var Z={};M(Z,{default:()=>pe});async function pe(){let e=l();if(e.length===0){figma.closePlugin(h("Select one or more text layers"));return}let t=await N(p,m);f("CLOSE_UI",function(){figma.closePlugin()}),f("SUBMIT",async function(r,n){let{currencyFormat:c,localeCode:v}=n;await u(i(a({},t),{formatCurrency:{currencyFormat:c},localeCode:v}),m);for(let{id:P,characters:_}of r){let I=x(P);await C([I]),I.characters=_}figma.closePlugin(S("Formatted currencies in selection"))}),figma.on("selectionchange",function(){let r=l(),n=d(r,["id","characters"]);y("SELECTION_CHANGED",n)});let o=d(e,["id","characters"]);A({height:322,title:"Format Currency",width:240},i(a({},t.formatCurrency),{localeCode:t.localeCode,textNodePlainObjects:o}))}var ee=s(()=>{"use strict";E();O();w()});var te={};M(te,{default:()=>ge});async function ge(){let e=l();if(e.length===0){figma.closePlugin(h("Select one or more text layers"));return}let t=await N(p,m);f("CLOSE_UI",function(){figma.closePlugin()}),f("SUBMIT",async function(r,n){let{currencyCode:c,localeCode:v,roundNumbers:P}=n;await u(i(a({},t),{convertCurrency:{currencyCode:c,roundNumbers:P},localeCode:v}),m);for(let{id:_,characters:I}of r){let F=x(_);await C([F]),F.characters=I}figma.closePlugin(S(`Converted currencies in selection to ${c}`))}),figma.on("selectionchange",function(){let r=l(),n=d(r,["id","characters"]);y("SELECTION_CHANGED",n)});let o=d(e,["id","characters"]);A({height:354,title:"Convert Currency",width:240},i(a({},t.convertCurrency),{localeCode:t.localeCode,textNodePlainObjects:o}))}var oe=s(()=>{"use strict";E();O();w()});var re={};M(re,{default:()=>ye});async function ye(){await u(p,m),figma.closePlugin("Reset plugin")}var ne=s(()=>{"use strict";E();w()});var xe={"src/format-currency/main.ts--default":(ee(),U(Z)).default,"src/convert-currency/main.ts--default":(oe(),U(te)).default,"src/reset-plugin/main.ts--default":(ne(),U(re)).default},Ce=typeof figma.command=="undefined"||figma.command===""?"src/format-currency/main.ts--default":figma.command;xe[Ce]();
